<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sheeba Records · unified doctor visit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }

        body {
            background: #f2f5f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem 1rem;
        }

        .main-container {
            max-width: 1600px;
            width: 100%;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .header {
            background: #1e3b5c;
            padding: 1.5rem 2rem;
            color: white;
        }
        .header h1 {
            font-size: 2rem;
            font-weight: 500;
            letter-spacing: -0.02em;
        }
        .header p {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 0.3rem;
        }

        .stats-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            background: #e9eff7;
            padding: 1rem 1.5rem;
            margin: 1.5rem 1.5rem 0 1.5rem;
            border-radius: 10px;
        }
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 0.8rem 1.2rem;
            flex: 1 1 160px;
            border: 1px solid #d0ddee;
        }
        .stat-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            color: #4a617c;
            font-weight: 600;
            letter-spacing: 0.03em;
        }
        .stat-value {
            font-size: 1.6rem;
            font-weight: 500;
            color: #0a2a44;
        }
        .stat-value small {
            font-size: 0.85rem;
            font-weight: 400;
            color: #5a7395;
        }

        .records-panel {
            padding: 1.5rem;
        }
        .panel-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e3b5c;
            border-bottom: 2px solid #dbe4f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
        }

        .month-block {
            margin-bottom: 2rem;
        }
        .month-heading {
            background: #eef3f9;
            border-radius: 20px;
            padding: 0.2rem 1rem;
            font-size: 0.8rem;
            font-weight: 600;
            color: #1f3b5c;
            display: inline-block;
            margin-bottom: 1rem;
            border: 1px solid #cbd8ec;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .section-heading {
            font-size: 1rem;
            font-weight: 600;
            color: #1e3b5c;
            background: #e2ecf9;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            margin: 1rem 0 0.8rem 0;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .subcategory {
            font-size: 0.75rem;
            font-weight: 600;
            color: #2c4c6e;
            background: #f0f6ff;
            padding: 0.2rem 0.8rem;
            border-radius: 16px;
            margin: 0.8rem 0 0.5rem 0;
            display: inline-block;
            border-left: 3px solid #8ba0bc;
            text-transform: uppercase;
        }

        .thumb-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 0.7rem;
        }
        .thumb-card {
            background: white;
            border: 1px solid #dee8f2;
            border-radius: 8px;
            padding: 0.4rem;
            cursor: pointer;
            transition: 0.1s;
        }
        .thumb-card:hover {
            border-color: #7f9bc2;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .thumb-img {
            width: 100%;
            aspect-ratio: 1 / 1.3;
            object-fit: cover;
            border-radius: 6px;
            background: #ecf2fa;
        }
        .thumb-caption {
            font-size: 0.55rem;
            color: #3e5a7a;
            text-align: center;
            margin-top: 0.2rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            text-transform: uppercase;
        }

        .info-bar {
            background: #e9eff7;
            border-radius: 8px;
            padding: 0.8rem 1.5rem;
            margin: 0 1.5rem 1.5rem 1.5rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #1e3b5c;
            border: 1px solid #d0deee;
        }
        .info-bar strong {
            background: #1e3b5c;
            color: white;
            padding: 0.1rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85);
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 95vw;
            max-height: 95vh;
        }
        .modal-image-wrapper {
            overflow: auto;
            max-width: 100%;
            max-height: calc(90vh - 70px);
            background: #111;
            border-radius: 8px;
        }
        .modal-image {
            display: block;
            width: auto;
            height: auto;
            max-width: none;
            transform-origin: 0 0;
            transition: transform 0.1s;
        }
        .zoom-controls {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
            background: rgba(30,30,40,0.9);
            padding: 0.5rem 1rem;
            border-radius: 40px;
        }
        .zoom-btn {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            font-size: 1.2rem;
            width: 36px; height: 36px;
            border-radius: 50%;
            cursor: pointer;
        }
        .zoom-btn.reset {
            font-size: 0.7rem;
            width: auto;
            padding: 0 1rem;
            border-radius: 20px;
        }
        .close-btn {
            position: absolute;
            top: 20px; right: 30px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: rgba(0,0,0,0.3);
            width: 48px; height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .footnote {
            font-size: 0.7rem;
            color: #6f8aac;
            text-align: right;
            padding: 0.5rem 1.5rem 1rem;
            border-top: 1px solid #dee9f2;
        }
    </style>
</head>
<body>
<div class="main-container">
    <div class="header">
        <h1>Sheeba Records</h1>
        <p>LMP 4 Aug 2025 – 36 weeks 20 Apr 2026</p>
    </div>

    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-label">Current date</div>
            <div class="stat-value" id="currentDate">—</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Days until 36w</div>
            <div class="stat-value" id="daysRemaining">— <small>days</small></div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Gestation (LMP)</div>
            <div class="stat-value" id="currentPregnancy">— <small>wks</small></div>
        </div>
    </div>

    <div class="records-panel" id="recordsContainer">
        <div class="panel-title">All Records (chronological)</div>
        <!-- dynamic content inserted here -->
    </div>

    <div class="info-bar">
        <span>LMP: <strong>4 AUG 2025</strong> — 36 weeks: <strong>20 APR 2026</strong></span>
        <span id="weeksRemaining"></span>
    </div>
    <div class="footnote">click thumbnail to enlarge · zoom controls in modal</div>
</div>

<div id="imageModal" class="modal" onclick="if(event.target===this) closeModal()">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <div class="modal-container" onclick="event.stopPropagation()">
        <div class="modal-image-wrapper" id="modalImageWrapper">
            <img class="modal-image" id="modalImage" alt="report">
        </div>
        <div class="zoom-controls">
            <button class="zoom-btn" id="zoomInBtn">+</button>
            <button class="zoom-btn" id="zoomOutBtn">−</button>
            <button class="zoom-btn reset" id="zoomResetBtn">reset</button>
        </div>
    </div>
</div>

<script>
    // --- image data (exactly as provided) ---
    const imageData = [
        { url: "https://i.postimg.cc/rpgSfJrv/DEC-2024-Follow-up-Clinical-Notes-(Sunray-Health-Point-Dr-Shalini-Sud)-2024.jpg", month: "Dec-24", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/tTTFwxdJ/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0001.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/hjjV6d8D/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0002.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/3RR2VvjY/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0003.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/qRR2S3ct/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0004.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/G25vCmzH/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0005.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/T15gYv4f/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0006.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/nM87XSyH/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0007.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/vDR942Jc/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0008.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/LhdfJQcP/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0009.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/59Dk541N/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0010.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/66F1VWwN/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0011.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/jqBk6xKf/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0012.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/7PjQ1HDf/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0013.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/tR8mdqyF/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0014.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/XNtDKj3w/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0015.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/fTXqBGTX/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0016.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/X7F1QR7L/FEB-2026-Blood-test-Urine-Test-KFT-21-Feb-2026-Tata-1-Mg-page-0017.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/XYbHhspH/FEB-2026-Clinical-Note-Admission-Order-Dr-Roli-Gautum.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/Hs5vBqsM/FEB-2026-Clinical-OPD-Notes-(Holy-Family-Hospital-Dr-Roli-Gautam)-19-Feb-2026.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/SN81DBNc/FEB-2026-Clinical-OPD-Notes-(Holy-Family-Hospital)-Feb-2026.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/y8HQ5Lkr/FEB-2026-Clinical-Progress-Notes-Dated-19-Feb-2026.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/xTHptwTp/FEB-2026-Doctor-Visit-9-Feb-2026.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/c4YkXp45/FEB-2026-Doctor-Visit-9-Feb-2026-II.jpg", month: "Feb-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/jSbg9ML8/FEB-2026-Glucose-Postprandial-21-Feb-Tata-1-Mg-page-0001-(1).jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/YCHnVdhs/FEB-2026-Test-Report-01-Feb-2026.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/rwknbfK7/FEB-2026-Test-Report-01-Feb-2026-CBC-Urine-Anlaysis.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/DwTjDxSV/FEB-2026-Test-Urine-Culture-Holy-Family-01-Feb-2026.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/4xgLMWmD/FEB-2026-Urine-Test-01-Feb-2026.jpg", month: "Feb-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/y8yQz0Rn/JAN-2026-Clinical-Progress-Notes-(Dated-31012026).jpg", month: "Jan-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/SxhT5gnp/JAN-2026-Doctor-Visit-26-Week-ANC-5th-Jan-2026.jpg", month: "Jan-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/fRN2F8VQ/JAN-2026-Doctor-Visit-5-Jan-2026.jpg", month: "Jan-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/W1wWP0ZX/JAN-2026-Follow-up-Prescription-(Dated-190126)-Dr-Rolee-Gatum.jpg", month: "Jan-26", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/vZsqj04T/JAN-2026-NPT-Test-Life-Science-06-Jan-2026-page-0001.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/mgyXG79b/JAN-2026-NPT-Test-Life-Science-06-Jan-2026-page-0002.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/8zmKVLvv/JAN-2026-NPT-Test-Life-Science-06-Jan-2026-page-0003.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/qvxbd2KN/JAN-2026-NPT-Test-Life-Science-06-Jan-2026-page-0004.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/SxfTpc9d/JAN-2026-NPT-Test-Life-Science-06-Jan-2026-page-0005.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/YS2X2jN6/JAN-2026-Ultrasound-06-01-2026.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/VkWGcXtF/JAN-2026-Ultrasound-31-01-2026.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/Ls4y4hkk/JAN-2026-Ultrasound-Report-(Holy-Family-Hospital)-31-01-2026.jpg", month: "Jan-26", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/9fXxXzPb/NOV-2025-2025-Prescription-Investigation-Order-Dr-Rubee-Khattar.jpg", month: "Nov-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/W4p9ptmS/NOV-2025-DEC-2025-Prescription-Treatment-Plan-Dr-Rubee-Khattar.jpg", month: "Nov-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/8Ckyksd9/NOV-2025-Double-Marker-Test-01-Nov-2025-Tata-1-Mg-page-0001.jpg", month: "Nov-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/DzfCfmd3/NOV-2025-Double-Marker-Test-01-Nov-2025-Tata-1-Mg-page-0002.jpg", month: "Nov-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/QMN6NVkr/NOV-2025-Double-Marker-Test-01-Nov-2025-Tata-1-Mg-page-0003.jpg", month: "Nov-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/W4p9ptmQ/OCT-2024-Clinical-Notes-(Sunray-Health-Point)-(Pre-conception-Early-Phase)-16-Oct-2024.jpg", month: "Oct-24", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/8CyZ7Dw3/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0001.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/3wLtk7nr/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0002.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/Xv2sr3Qy/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0003.jpg", month: "Oct-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/4dmBtMS9/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0004.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/26V2vJKy/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0005.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/TwpCmS4m/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0006.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/pTpq876B/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0007.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/W3CS7nBW/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0008.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/j5mvhXpM/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0009.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/1t2MKBxs/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0010.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/rm3g9j6T/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-I-page-0011.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/qqKwDK0T/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0001.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/3NG1fG73/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0002.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/SR9d19qY/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0003.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/NFXDCXYy/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0004.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/prjCcjxQ/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0005.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/bYSmw7n5/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0006.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/RCJgZkfv/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0007.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/ZKkVBwFY/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0008.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/c4qXgFM4/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0009.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/tC02ZBt1/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0010.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/m2x8zmNC/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0011.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/fTx5xYBY/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0012.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/kXrf6TFT/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0013.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/5Nwpw8nK/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0014.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/tChDhF28/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0015.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/CxS7JdQX/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0016.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/WbMSM05v/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0017.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/vZbhXDKy/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0018.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/YCMR8jPr/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0019.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/sgsmK1L5/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0020.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/8zN4wsY6/OCT-2025-29-OCT-2025-Tata-1-Mg-Test-Report-II-page-0021.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/MGZsZXbx/OCT-2025-Doctor-Visit-28-Oct-2025.jpg", month: "Oct-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/5tPsX1nc/OCT-2025-Doctor-Visit-31-Oct-2025.jpg", month: "Oct-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/fbH8VZ56/OCT-2025-Early-Ultrasound-Report-(Holy-Family-Hospital)-29-10-2025.jpg", month: "Oct-25", category: "TEST REPORT" },
        { url: "https://i.postimg.cc/jStcvC1n/SEP-2025-Prescription-(Starcare-Medical-Center-UAE)-08-Sep-2025.jpg", month: "Sep-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/63DBKVXN/OCT-2025-Doctor-Visit-31-Oct-2025.jpg", month: "Oct-25", category: "DOC VISIT" },
        { url: "https://i.postimg.cc/GtwnVcFs/SEP-2025-Prescription-(Starcare-Medical-Center-UAE)-08-Sep-2025.jpg", month: "Sep-25", category: "DOC VISIT" }
    ];

    // helper: parse month for sorting (descending)
    function monthToDate(m) {
        const [mmm, yy] = m.split('-');
        const months = { Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11 };
        return new Date(2000 + parseInt(yy), months[mmm], 1);
    }

    // get subcategory from filename (only used for test reports now)
    function getSubcategory(url) {
        const f = url.split('/').pop().toLowerCase();
        if (f.includes('ultrasound')) return 'ULTRASOUND';
        if (f.includes('double-marker')) return 'DOUBLE MARKER';
        if (f.includes('npt-test')) return 'NPT TEST';
        if (f.includes('blood-test') || f.includes('kft')) return 'BLOOD / KFT';
        if (f.includes('urine-culture')) return 'URINE CULTURE';
        if (f.includes('urine-test')) return 'URINE TEST';
        if (f.includes('glucose')) return 'GLUCOSE TEST';
        if (f.includes('cbc')) return 'CBC';
        if (f.includes('test-report')) return 'TEST REPORT';
        // fallback for any other test-related names
        return 'TEST REPORT';
    }

    // group items by month, and within month separate doctor (all non‑test) and test
    const monthsMap = {}; // month -> { doctor: { "Doctor Visit": [] }, test: { subcat: [] } }

    imageData.forEach(item => {
        const month = item.month;
        if (!monthsMap[month]) monthsMap[month] = { doctor: {}, test: {} };
        
        if (item.category === 'TEST REPORT') {
            // test report – keep original subcategory
            const sub = getSubcategory(item.url);
            if (!monthsMap[month].test[sub]) monthsMap[month].test[sub] = [];
            monthsMap[month].test[sub].push(item);
        } else {
            // doctor visit – all go under one heading "Doctor Visit"
            const doctorKey = "Doctor Visit";
            if (!monthsMap[month].doctor[doctorKey]) monthsMap[month].doctor[doctorKey] = [];
            monthsMap[month].doctor[doctorKey].push(item);
        }
    });

    // sort months descending
    const sortedMonths = Object.keys(monthsMap).sort((a,b) => monthToDate(b) - monthToDate(a));

    // generate HTML
    let html = '';
    sortedMonths.forEach(month => {
        const data = monthsMap[month];
        html += `<div class="month-block">`;
        html += `<div class="month-heading">${month}</div>`;

        // Doctor Visit section (all non‑test items, now under one subcategory)
        const doctorSubs = data.doctor;
        if (Object.keys(doctorSubs).length > 0) {
            html += `<div class="section-heading">Doctor Visit</div>`;
            // only one key: "Doctor Visit"
            Object.keys(doctorSubs).sort().forEach(sub => {
                const items = doctorSubs[sub];
                html += `<div class="subcategory">${sub} (${items.length})</div>`;
                html += `<div class="thumb-grid">`;
                items.forEach(item => {
                    const short = item.url.split('/').pop().substring(0, 15) + '…';
                    html += `<div class="thumb-card" onclick="openModal('${item.url}')">
                        <img class="thumb-img" src="${item.url}" loading="lazy" onerror="this.style.background='#ccc'">
                        <div class="thumb-caption">${short}</div>
                    </div>`;
                });
                html += `</div>`;
            });
        }

        // Test Reports section
        const testSubs = data.test;
        if (Object.keys(testSubs).length > 0) {
            html += `<div class="section-heading">Test Reports</div>`;
            Object.keys(testSubs).sort().forEach(sub => {
                const items = testSubs[sub];
                html += `<div class="subcategory">${sub} (${items.length})</div>`;
                html += `<div class="thumb-grid">`;
                items.forEach(item => {
                    const short = item.url.split('/').pop().substring(0, 15) + '…';
                    html += `<div class="thumb-card" onclick="openModal('${item.url}')">
                        <img class="thumb-img" src="${item.url}" loading="lazy" onerror="this.style.background='#ccc'">
                        <div class="thumb-caption">${short}</div>
                    </div>`;
                });
                html += `</div>`;
            });
        }

        html += `</div>`; // close month-block
    });

    document.getElementById('recordsContainer').innerHTML += html;

    // modal controls (unchanged)
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const zoomIn = document.getElementById('zoomInBtn');
    const zoomOut = document.getElementById('zoomOutBtn');
    const reset = document.getElementById('zoomResetBtn');
    let scale = 1;
    modalImg.style.transform = 'scale(1)';

    window.openModal = (url) => {
        modal.style.display = 'flex';
        modalImg.src = url;
        scale = 1;
        modalImg.style.transform = 'scale(1)';
    };
    window.closeModal = () => {
        modal.style.display = 'none';
        modalImg.src = '';
    };
    zoomIn.onclick = () => { scale = Math.min(3, scale + 0.3); modalImg.style.transform = `scale(${scale})`; };
    zoomOut.onclick = () => { scale = Math.max(0.4, scale - 0.3); modalImg.style.transform = `scale(${scale})`; };
    reset.onclick = () => { scale = 1; modalImg.style.transform = 'scale(1)'; };
    modalImg.ondblclick = () => { scale = 1; modalImg.style.transform = 'scale(1)'; };

    // date calculations (unchanged)
    (function() {
        const lmp = new Date(2025, 7, 4);
        const target = new Date(2026, 3, 20);
        const today = new Date();
        today.setHours(0,0,0,0);
        document.getElementById('currentDate').innerText = today.toLocaleDateString(undefined, { year:'numeric', month:'long', day:'numeric' });
        const days = Math.ceil((target - today) / 86400000);
        const dEl = document.getElementById('daysRemaining');
        const wEl = document.getElementById('weeksRemaining');
        if (days > 0) {
            dEl.innerHTML = `${days} <small>days</small>`;
            wEl.innerText = `${Math.floor(days/7)} wk ${days%7} d to 36w`;
        } else if (days === 0) {
            dEl.innerHTML = '0 <small>days</small>';
            wEl.innerText = '36 weeks exactly';
        } else {
            dEl.innerHTML = '—';
            wEl.innerText = 'past 36 weeks';
        }
        const preg = Math.floor((today - lmp) / 86400000);
        if (preg >= 0) {
            document.getElementById('currentPregnancy').innerHTML = `${Math.floor(preg/7)} <small>wk</small> ${preg%7} <small>d</small>`;
        }
    })();
</script>
</body>
</html>
